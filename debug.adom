--
class Counter {
  increment() {
    this.count++
    this.emit('increment', this.count)
  }
}
--

let recent = 0

tag Counter [
  let count = 0
  div '{{count}}'
  button on:click="this.increment()" "increment {{count}}"
]

html [
  head []
  body root [
    div [
      h1 'most recent: {{ recent }}'
      each (i in [repeat 0 3]) [
        Counter on:increment="recent = $e" []
        each (i in [repeat 0 3]) [
          Counter on:increment="recent = $e" []
        ]
      ]
    ]
  ]
]